"use strict";(self.webpackChunksomiadmin=self.webpackChunksomiadmin||[]).push([[647],{7633:(S,C,r)=>{r.d(C,{w:()=>R});var y=r(5e3),z=r(9826);let R=(()=>{class c{constructor(t,s){this.router=t,this.route=s}serializeQueryParams(t){const s={};if(s.pageIndex=(null==t?void 0:t.pageIndex)>1?t.pageIndex:void 0,10!=(null==t?void 0:t.pageSize)&&(s.pageSize=t.pageSize),null!=t.filter){const a=t.filter.filter(l=>null!=l.value&&l.value.length>0).map(l=>`${l.key}|${Array.isArray(l.value)?"in":"eq"}|${Array.isArray(l.value)?l.value.join("-"):l.value}`);s.filter=a.length>0?a.join(","):void 0}if(null!=t.sort&&t.sort.length>0){const a=t.sort.filter(l=>null!=l.value).map(l=>`${l.key}|${"ascend"==l.value?"ASC":"DESC"}`);s.sort=a.length>0?a.join(","):void 0}return s}onTableQueryParamsChange(t){const s=this.serializeQueryParams(t);this.router.navigate([],{relativeTo:this.route,queryParams:s,queryParamsHandling:"merge"})}filterText(t,s){var a;const i=null!==(a=this.deserializeQueryParams(this.route).filter)&&void 0!==a?a:{};i[t]=null!=s?{like:s}:{};const g=Object.keys(i).map(u=>{if(Object.keys(i[u]).length<1)return null;const d=Object.keys(i[u])[0];return`${u}|${d}|${"in"==d?i[u][d].join("-"):i[u][d]}`}).filter(u=>null!=u),p=g.length>0?g.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:p},queryParamsHandling:"merge"})}filterRange(t,s){var a;const i=null!==(a=this.deserializeQueryParams(this.route).filter)&&void 0!==a?a:{};i[t]=null!=s?{between:s}:{};const g=Object.keys(i).map(u=>{if(Object.keys(i[u]).length<1)return null;const d=Object.keys(i[u])[0];return`${u}|${d}|${"in"==d||"between"==d?i[u][d].join("-"):i[u][d]}`}).filter(u=>null!=u),p=g.length>0?g.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:p},queryParamsHandling:"merge"})}resetFilter(t,s){this.filterText(t,void 0),s.value=""}downloadURI(t,s){const a=document.createElement("a");a.download=s,a.href=t,a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}deserializeQueryParams(t){var s;const a=t.sort?t.sort.split(",").map(p=>({field:p.split("|")[0],direction:p.split("|")[1]})):[],l={};null!=t.filter&&t.filter.split(",").forEach(p=>{const u={},d=p.split("|")[1];if("in"==d){const m=p.split("|")[2].split("-");u[d]=m}else if("between"==d){const m=p.split("|")[2].split("-");u[d]={lower:m[0],upper:m[1]}}else u[d]=p.split("|")[2];l[p.split("|")[0]]=u});const i=null!=t.pageIndex?parseInt(t.pageIndex):1,g=null!=t.pageSize?parseInt(t.pageSize):10;return{sorting:a.length>0?a:void 0,paging:{offset:null!==(s=(i-1)*g)&&void 0!==s?s:void 0,limit:g},filter:null!=l&&Object.keys(l).length>0?l:void 0}}}return c.\u0275fac=function(t){return new(t||c)(y.LFG(z.F0),y.LFG(z.gz))},c.\u0275prov=y.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},20:(S,C,r)=>{r.d(C,{d:()=>R});var y=r(4362),z=r(5e3);let R=(()=>{class T{constructor(c){this.gql=c}resolve(c,A){return this.gql.fetch({id:c.params.id})}}return T.\u0275fac=function(c){return new(c||T)(z.LFG(y.kd6))},T.\u0275prov=z.Yz7({token:T,factory:T.\u0275fac}),T})()},3647:(S,C,r)=>{r.r(C),r.d(C,{RequestsModule:()=>D});var y=r(6889),z=r(9826),R=r(20),T=r(4362),e=r(5e3),c=r(7633);let A=(()=>{class n{constructor(o,f){this.paging=o,this.gql=f}resolve(o,f){const h=this.paging.deserializeQueryParams(o.queryParams);return this.gql.fetch(h)}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(c.w),e.LFG(T.bqW))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var t=r(5233),s=r(4004),a=r(1062),l=r(1945),i=r(9808),g=r(939),p=r(8481),u=r(3677),d=r(2905),m=r(3075),L=r(6042),x=r(2643),F=r(2683);function b(n,v){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"currency"),e.qZA(),e.TgZ(7,"td")(8,"nz-tag",12),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"td")(12,"a",13),e._uU(13),e.ALo(14,"translate"),e.qZA()()()),2&n){const o=v.$implicit,f=e.oxw(2);e.xp6(2),e.Oqu(e.xi3(3,6,o.createdOn,"short")),e.xp6(3),e.Oqu(e.xi3(6,9,o.costAfterCoupon,o.currency)),e.xp6(3),e.Q6J("nzColor",f.tagColor.orderStatus(o.status)),e.xp6(1),e.Oqu(e.lcZ(10,12,"enum.request."+o.status)),e.xp6(3),e.Q6J("routerLink","view/"+o.id),e.xp6(1),e.Oqu(e.lcZ(14,14,"profile.view"))}}function P(n,v){if(1&n){const o=e.EpF();e.TgZ(0,"nz-table",8,9),e.NdJ("nzQueryParams",function(h){return e.CHM(o),e.oxw().tableService.onTableQueryParamsChange(h)}),e.TgZ(2,"thead")(3,"tr")(4,"th"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",10),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,b,15,16,"tr",11),e.qZA()()}if(2&n){const o=v.ngIf,f=e.MAs(1),h=e.oxw();e.Q6J("nzFrontPagination",!1)("nzData",o.nodes)("nzTotal",o.totalCount),e.xp6(5),e.hij(" ",e.lcZ(6,11,"profile.dateTime")," "),e.xp6(3),e.hij(" ",e.lcZ(9,13,"profile.cost")," "),e.xp6(2),e.Q6J("nzSortFn",!0)("nzFilters",h.statuses)("nzFilterFn",!0),e.xp6(1),e.hij(" ",e.lcZ(12,15,"profile.status")," "),e.xp6(3),e.Oqu(e.lcZ(15,17,"profile.actions")),e.xp6(3),e.Q6J("ngForOf",f.data)}}const j=[{path:"",component:(()=>{class n{constructor(o,f,h,O,M){this.tagColor=o,this.route=f,this.tableService=h,this.translate=O,this.router=M,this.statuses=Object.values(T.iFo).map(Z=>({value:Z,text:this.translate.instant(`enum.request.${Z}`)})),this.dateRanges=[]}ngOnInit(){this.query=this.route.data.pipe((0,s.U)(o=>o.orders))}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(t.k),e.Y36(z.gz),e.Y36(c.w),e.Y36(a.sK),e.Y36(z.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-requests-list"]],decls:17,vars:11,consts:[["nzBackIcon","","nzTitle","Requests","nzSubtitle","List of all the order requests",3,"nzGhost"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["filterDateRange","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],[1,"search-box"],[3,"ngModel","ngModelChange"],["nz-button","","nzSize","small","nzType","default",1,"search-button",3,"click"],["nz-button","","nzSize","small",3,"click"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams"],["table",""],["nzColumnKey","status",3,"nzSortFn","nzFilters","nzFilterFn"],[4,"ngFor","ngForOf"],[3,"nzColor"],[3,"routerLink"]],template:function(o,f){if(1&o&&(e.TgZ(0,"nz-page-header",0),e._UZ(1,"nz-page-header-extra"),e.TgZ(2,"nz-page-header-content"),e.YNc(3,P,18,19,"nz-table",1),e.ALo(4,"async"),e.TgZ(5,"nz-dropdown-menu",null,2)(7,"div",3)(8,"div",4)(9,"nz-range-picker",5),e.NdJ("ngModelChange",function(O){return f.dateRanges=O}),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"button",6),e.NdJ("click",function(){return f.tableService.filterText("createdOn",void 0)}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",7),e.NdJ("click",function(){return f.tableService.filterText("createdOn",void 0)}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()()()),2&o){let h;e.Q6J("nzGhost",!1),e.xp6(3),e.Q6J("ngIf",null==(h=e.lcZ(4,5,f.query))||null==h.data?null:h.data.orders),e.xp6(6),e.Q6J("ngModel",f.dateRanges),e.xp6(3),e.hij(" ",e.lcZ(13,7,"profile.search")," "),e.xp6(3),e.hij(" ",e.lcZ(16,9,"profile.reset")," ")}},directives:[l.$O,l.Jp,l.u5,i.O5,g.N8,g.Om,g.$Z,g.Uo,g._C,g.qD,g.p0,i.sg,p.j,z.yS,u.RR,d.uw,d.wS,m.JJ,m.On,L.ix,x.dQ,F.w],pipes:[i.Ov,a.X$,i.uU,i.H9],encapsulation:2}),n})(),resolve:{orders:A},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",loadChildren:()=>Promise.all([r.e(592),r.e(944)]).then(r.bind(r,8944)).then(n=>n.RequestViewModule)}];let q=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[A,R.d],imports:[[z.Bz.forChild(j)],z.Bz]}),n})(),D=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[q,y.m]]}),n})()}}]);