"use strict";(self.webpackChunksomiadmin=self.webpackChunksomiadmin||[]).push([[407],{7633:(x,y,r)=>{r.d(y,{w:()=>A});var v=r(5e3),C=r(9826);let A=(()=>{class m{constructor(e,l){this.router=e,this.route=l}serializeQueryParams(e){const l={};if(l.pageIndex=(null==e?void 0:e.pageIndex)>1?e.pageIndex:void 0,10!=(null==e?void 0:e.pageSize)&&(l.pageSize=e.pageSize),null!=e.filter){const o=e.filter.filter(a=>null!=a.value&&a.value.length>0).map(a=>`${a.key}|${Array.isArray(a.value)?"in":"eq"}|${Array.isArray(a.value)?a.value.join("-"):a.value}`);l.filter=o.length>0?o.join(","):void 0}if(null!=e.sort&&e.sort.length>0){const o=e.sort.filter(a=>null!=a.value).map(a=>`${a.key}|${"ascend"==a.value?"ASC":"DESC"}`);l.sort=o.length>0?o.join(","):void 0}return l}onTableQueryParamsChange(e){const l=this.serializeQueryParams(e);this.router.navigate([],{relativeTo:this.route,queryParams:l,queryParamsHandling:"merge"})}filterText(e,l){var o;const u=null!==(o=this.deserializeQueryParams(this.route).filter)&&void 0!==o?o:{};u[e]=null!=l?{like:l}:{};const f=Object.keys(u).map(s=>{if(Object.keys(u[s]).length<1)return null;const c=Object.keys(u[s])[0];return`${s}|${c}|${"in"==c?u[s][c].join("-"):u[s][c]}`}).filter(s=>null!=s),d=f.length>0?f.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:d},queryParamsHandling:"merge"})}filterRange(e,l){var o;const u=null!==(o=this.deserializeQueryParams(this.route).filter)&&void 0!==o?o:{};u[e]=null!=l?{between:l}:{};const f=Object.keys(u).map(s=>{if(Object.keys(u[s]).length<1)return null;const c=Object.keys(u[s])[0];return`${s}|${c}|${"in"==c||"between"==c?u[s][c].join("-"):u[s][c]}`}).filter(s=>null!=s),d=f.length>0?f.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:d},queryParamsHandling:"merge"})}resetFilter(e,l){this.filterText(e,void 0),l.value=""}downloadURI(e,l){const o=document.createElement("a");o.download=l,o.href=e,o.target="_blank",document.body.appendChild(o),o.click(),document.body.removeChild(o)}deserializeQueryParams(e){var l;const o=e.sort?e.sort.split(",").map(d=>({field:d.split("|")[0],direction:d.split("|")[1]})):[],a={};null!=e.filter&&e.filter.split(",").forEach(d=>{const s={},c=d.split("|")[1];if("in"==c){const h=d.split("|")[2].split("-");s[c]=h}else if("between"==c){const h=d.split("|")[2].split("-");s[c]={lower:h[0],upper:h[1]}}else s[c]=d.split("|")[2];a[d.split("|")[0]]=s});const u=null!=e.pageIndex?parseInt(e.pageIndex):1,f=null!=e.pageSize?parseInt(e.pageSize):10;return{sorting:o.length>0?o:void 0,paging:{offset:null!==(l=(u-1)*f)&&void 0!==l?l:void 0,limit:f},filter:null!=a&&Object.keys(a).length>0?a:void 0}}}return m.\u0275fac=function(e){return new(e||m)(v.LFG(C.F0),v.LFG(C.gz))},m.\u0275prov=v.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},7407:(x,y,r)=>{r.r(y),r.d(y,{ComplaintsModule:()=>b});var v=r(9808),C=r(9826),A=r(4362),T=r(5233),S=r(4004),m=r(4610),t=r(5e3),e=r(7633),l=r(1945),o=r(939),a=r(8481),u=r(1062);function f(n,p){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td")(9,"nz-tag",6),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"td")(13,"a",7),t._uU(14),t.ALo(15,"translate"),t.qZA()()()),2&n){const i=p.$implicit,g=t.oxw(2);t.xp6(2),t.Oqu(t.xi3(3,7,i.inscriptionTimestamp,"short")),t.xp6(3),t.Oqu(i.subject),t.xp6(2),t.Oqu(i.content),t.xp6(2),t.Q6J("nzColor",g.tagColor.complaintStatus(i.status)),t.xp6(1),t.Oqu(t.lcZ(11,10,"enum.complaintStatus."+g.camelCase(i.status))),t.xp6(3),t.Q6J("routerLink","view/"+i.id),t.xp6(1),t.Oqu(t.lcZ(15,12,"profile.view"))}}function d(n,p){if(1&n){const i=t.EpF();t.TgZ(0,"nz-table",2,3),t.NdJ("nzQueryParams",function(z){return t.CHM(i),t.oxw().tableService.onTableQueryParamsChange(z)}),t.TgZ(2,"thead")(3,"tr")(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",4),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"th"),t._uU(17),t.ALo(18,"translate"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,f,16,14,"tr",5),t.qZA()()}if(2&n){const i=p.ngIf,g=t.MAs(1);t.Q6J("nzFrontPagination",!1)("nzData",i.nodes)("nzTotal",i.totalCount),t.xp6(5),t.Oqu(t.lcZ(6,9,"profile.dateTime")),t.xp6(3),t.Oqu(t.lcZ(9,11,"profile.subject")),t.xp6(3),t.Oqu(t.lcZ(12,13,"profile.content")),t.xp6(3),t.Oqu(t.lcZ(15,15,"profile.status")),t.xp6(3),t.Oqu(t.lcZ(18,17,"profile.actions")),t.xp6(3),t.Q6J("ngForOf",g.data)}}let s=(()=>{class n{constructor(i,g,z,Z){this.route=i,this.router=g,this.tagColor=z,this.tableService=Z,this.complaintStatus=A.P5X,this.camelCase=m.eV}ngOnInit(){this.query=this.route.data.pipe((0,S.U)(i=>i.complaints))}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(C.gz),t.Y36(C.F0),t.Y36(T.k),t.Y36(e.w))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-complaints-list"]],decls:4,vars:4,consts:[["nzBackIcon","","nzTitle","Complaints","nzSubtitle","Complaints submitted by riders/drivers",3,"nzGhost"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams"],["table",""],["nzShowSort","","nzColumnKey","isReviewed"],[4,"ngFor","ngForOf"],[3,"nzColor"],[3,"routerLink"]],template:function(i,g){if(1&i&&(t.TgZ(0,"nz-page-header",0)(1,"nz-page-header-content"),t.YNc(2,d,21,19,"nz-table",1),t.ALo(3,"async"),t.qZA()()),2&i){let z;t.Q6J("nzGhost",!1),t.xp6(2),t.Q6J("ngIf",null==(z=t.lcZ(3,2,g.query))||null==z.data?null:z.data.complaints)}},directives:[l.$O,l.u5,v.O5,o.N8,o.Om,o.$Z,o.Uo,o._C,o.qD,o.p0,v.sg,a.j,C.yS],pipes:[v.Ov,u.X$,v.uU],encapsulation:2}),n})(),c=(()=>{class n{constructor(i,g){this.paging=i,this.gql=g}resolve(i,g){const z=this.paging.deserializeQueryParams(i.queryParams);return this.gql.fetch(z)}}return n.\u0275fac=function(i){return new(i||n)(t.LFG(e.w),t.LFG(A.sAp))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const h=[{path:"",component:s,resolve:{complaints:c},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",loadChildren:()=>Promise.all([r.e(592),r.e(493)]).then(r.bind(r,1493)).then(n=>n.ComplaintViewModule)}];let O=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[c],imports:[[C.Bz.forChild(h)],C.Bz]}),n})();var L=r(6889);let b=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[T.k],imports:[[v.ez,O,L.m]]}),n})()}}]);