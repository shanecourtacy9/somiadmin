"use strict";(self.webpackChunksomiadmin=self.webpackChunksomiadmin||[]).push([[404],{7633:(B,U,s)=>{s.d(U,{w:()=>L});var _=s(5e3),F=s(9826);let L=(()=>{class h{constructor(l,m){this.router=l,this.route=m}serializeQueryParams(l){const m={};if(m.pageIndex=(null==l?void 0:l.pageIndex)>1?l.pageIndex:void 0,10!=(null==l?void 0:l.pageSize)&&(m.pageSize=l.pageSize),null!=l.filter){const u=l.filter.filter(d=>null!=d.value&&d.value.length>0).map(d=>`${d.key}|${Array.isArray(d.value)?"in":"eq"}|${Array.isArray(d.value)?d.value.join("-"):d.value}`);m.filter=u.length>0?u.join(","):void 0}if(null!=l.sort&&l.sort.length>0){const u=l.sort.filter(d=>null!=d.value).map(d=>`${d.key}|${"ascend"==d.value?"ASC":"DESC"}`);m.sort=u.length>0?u.join(","):void 0}return m}onTableQueryParamsChange(l){const m=this.serializeQueryParams(l);this.router.navigate([],{relativeTo:this.route,queryParams:m,queryParamsHandling:"merge"})}filterText(l,m){var u;const g=null!==(u=this.deserializeQueryParams(this.route).filter)&&void 0!==u?u:{};g[l]=null!=m?{like:m}:{};const T=Object.keys(g).map(p=>{if(Object.keys(g[p]).length<1)return null;const z=Object.keys(g[p])[0];return`${p}|${z}|${"in"==z?g[p][z].join("-"):g[p][z]}`}).filter(p=>null!=p),v=T.length>0?T.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:v},queryParamsHandling:"merge"})}filterRange(l,m){var u;const g=null!==(u=this.deserializeQueryParams(this.route).filter)&&void 0!==u?u:{};g[l]=null!=m?{between:m}:{};const T=Object.keys(g).map(p=>{if(Object.keys(g[p]).length<1)return null;const z=Object.keys(g[p])[0];return`${p}|${z}|${"in"==z||"between"==z?g[p][z].join("-"):g[p][z]}`}).filter(p=>null!=p),v=T.length>0?T.join(","):void 0;this.router.navigate([],{relativeTo:this.route,queryParams:{filter:v},queryParamsHandling:"merge"})}resetFilter(l,m){this.filterText(l,void 0),m.value=""}downloadURI(l,m){const u=document.createElement("a");u.download=m,u.href=l,u.target="_blank",document.body.appendChild(u),u.click(),document.body.removeChild(u)}deserializeQueryParams(l){var m;const u=l.sort?l.sort.split(",").map(v=>({field:v.split("|")[0],direction:v.split("|")[1]})):[],d={};null!=l.filter&&l.filter.split(",").forEach(v=>{const p={},z=v.split("|")[1];if("in"==z){const x=v.split("|")[2].split("-");p[z]=x}else if("between"==z){const x=v.split("|")[2].split("-");p[z]={lower:x[0],upper:x[1]}}else p[z]=v.split("|")[2];d[v.split("|")[0]]=p});const g=null!=l.pageIndex?parseInt(l.pageIndex):1,T=null!=l.pageSize?parseInt(l.pageSize):10;return{sorting:u.length>0?u:void 0,paging:{offset:null!==(m=(g-1)*T)&&void 0!==m?m:void 0,limit:T},filter:null!=d&&Object.keys(d).length>0?d:void 0}}}return h.\u0275fac=function(l){return new(l||h)(_.LFG(F.F0),_.LFG(F.gz))},h.\u0275prov=_.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},3404:(B,U,s)=>{s.r(U),s.d(U,{ManagementServicesModule:()=>qe});var _=s(9826),F=s(5233),L=s(4004),e=s(5e3),b=s(9808),h=s(7484),I=s(868),l=s(939),m=s(6042),u=s(2643),d=s(2683),g=s(3478),T=s(1062);function v(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"a",8),e._uU(5),e.ALo(6,"translate"),e.qZA()()()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("routerLink","view/"+t.id),e.xp6(1),e.Oqu(e.lcZ(6,3,"profile.view"))}}function p(n,a){if(1&n&&(e.TgZ(0,"nz-tab",4)(1,"nz-table",5,6)(3,"thead")(4,"tr")(5,"th"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"th"),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,v,7,5,"tr",7),e.qZA()()()),2&n){const t=a.$implicit,r=e.MAs(2);e.Q6J("nzTitle",t.name),e.xp6(1),e.Q6J("nzFrontPagination",!1)("nzData",t.services),e.xp6(5),e.Oqu(e.lcZ(7,6,"profile.name")),e.xp6(3),e.Oqu(e.lcZ(10,8,"profile.actions")),e.xp6(3),e.Q6J("ngForOf",r.data)}}function z(n,a){if(1&n&&(e.TgZ(0,"button",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=e.oxw(2).ngIf,r=e.oxw();let i;e.Q6J("routerLink","category/view/"+t[null!==(i=r.selectedCategory)&&void 0!==i?i:0].id),e.xp6(1),e.hij(" ",e.lcZ(2,2,"services.editCategory")," ")}}function x(n,a){1&n&&(e.TgZ(0,"button",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.Q6J("routerLink","new"),e.xp6(1),e.hij(" ",e.lcZ(2,2,"services.newService")," "))}function W(n,a){if(1&n&&(e.YNc(0,z,3,4,"button",9),e.TgZ(1,"button",10),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,x,3,4,"button",9)),2&n){const t=e.oxw().ngIf;e.Q6J("ngIf",t.length>0),e.xp6(2),e.hij(" ",e.lcZ(3,3,"services.newCategory")," "),e.xp6(2),e.Q6J("ngIf",t.length>0)}}function K(n,a){1&n&&(e.TgZ(0,"div")(1,"nz-result",12),e.ALo(2,"translate"),e.TgZ(3,"div",13)(4,"button",14),e._uU(5),e.ALo(6,"translate"),e.qZA()()()()),2&n&&(e.xp6(1),e.s9C("nzTitle",e.lcZ(2,2,"service.createFirstNotice")),e.xp6(4),e.hij(" ",e.lcZ(6,4,"services.newCategory")," "))}function X(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nz-card")(1,"nz-tabset",1),e.NdJ("nzSelectedIndexChange",function(i){return e.CHM(t),e.oxw().selectedCategory=i}),e.YNc(2,p,13,10,"nz-tab",2),e.qZA(),e.YNc(3,W,5,5,"ng-template",null,3,e.W1O),e.YNc(5,K,7,6,"div",0),e.qZA()}if(2&n){const t=a.ngIf,r=e.MAs(4),i=e.oxw();e.xp6(1),e.Q6J("nzTabBarExtraContent",r)("nzSelectedIndex",i.selectedCategory),e.xp6(1),e.Q6J("ngForOf",t),e.xp6(3),e.Q6J("ngIf",t.length<1)}}let ee=(()=>{class n{constructor(t,r,i){this.route=t,this.router=r,this.tagColor=i,this.lastNameSearchValue=""}ngOnInit(){this.query=this.route.data.pipe((0,L.U)(t=>t.services))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.gz),e.Y36(_.F0),e.Y36(F.k))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-management-services-list"]],decls:2,vars:3,consts:[[4,"ngIf"],["nzType","card",3,"nzTabBarExtraContent","nzSelectedIndex","nzSelectedIndexChange"],[3,"nzTitle",4,"ngFor","ngForOf"],["extraTemplate",""],[3,"nzTitle"],["nzBordered","",3,"nzFrontPagination","nzData"],["ajaxTable",""],[4,"ngFor","ngForOf"],[3,"routerLink"],["nz-button","","style","margin-left: 8px",3,"routerLink",4,"ngIf"],["nz-button","","routerLink","category/new/",2,"margin-left","8px"],["nz-button","",2,"margin-left","8px",3,"routerLink"],["nzStatus","info",3,"nzTitle"],["nz-result-extra",""],["nz-button","","nzType","default","routerLink","category/new/"]],template:function(t,r){if(1&t&&(e.YNc(0,X,6,4,"nz-card",0),e.ALo(1,"async")),2&t){let i;e.Q6J("ngIf",null==(i=e.lcZ(1,1,r.query))||null==i.data?null:i.data.serviceCategories)}},directives:[b.O5,h.bd,I.xH,b.sg,I.xw,l.N8,l.Om,l.$Z,l.Uo,l._C,l.p0,_.yS,m.ix,u.dQ,d.w,_.rH,g.ml,g.ey],pipes:[b.Ov,T.X$],encapsulation:2}),n})();var q=s(655),c=s(3075),M=s(4362),te=s(2340),ne=s(9751),S=s(3905),J=s(9727),N=s(9083),A=s(4546),w=s(1894),O=s(1047),D=s(8054),re=s(656),ie=s(6462),oe=s(8481),ae=s(5052),le=s(647),R=s(3762),se=s(4173);const ce=["timeStartPicker"],me=["timeEndPicker"],ue=["timeMultiplyInput"],de=["distanceFromInput"],pe=["distanceToInput"],ge=["distanceMultiplyInput"];function ze(n,a){if(1&n&&e._UZ(0,"nz-option",64),2&n){const t=a.$implicit;e.Q6J("nzValue",t.id)("nzLabel",t.name)}}function fe(n,a){if(1&n&&e._UZ(0,"nz-option",64),2&n){const t=a.$implicit;e.Q6J("nzValue",t)("nzLabel",t)}}function ve(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nz-tag",65),e.NdJ("nzCheckedChange",function(i){const Z=e.CHM(t).$implicit;return e.oxw(2).handleRegionCheckChange(i,Z)}),e._uU(1),e.qZA()}if(2&n){const t=a.$implicit,r=e.oxw(2);e.Q6J("nzChecked",r.form.value.regions.indexOf(t.id)>-1),e.xp6(1),e.hij(" ",t.name," ")}}function _e(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"i",66),e.TgZ(2,"div",67),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("nzType",t.loadingUpload?"loading":"plus"),e.xp6(2),e.hij(" ",e.lcZ(4,2,"profile.upload")," ")}}function he(n,a){if(1&n&&e._UZ(0,"img",68),2&n){const t=e.oxw(2);e.Q6J("src",t.root+t.avatarUrl,e.LSH)}}function Ze(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",69)(1,"span",70)(2,"mark"),e._uU(3),e.qZA()(),e.TgZ(4,"ul",71)(5,"nz-list-item-action")(6,"a",72),e.NdJ("click",function(){const f=e.CHM(t).$implicit;return e.oxw(2).removeTimeRule(f)}),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e._uU(9),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(3),e.hij("",t.multiply,"x"),e.xp6(4),e.Oqu(e.lcZ(8,4,"profile.delete")),e.xp6(2),e.AsE(" ",t.startTime," - ",t.endTime," ")}}function Te(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"li",69)(1,"span",70)(2,"mark"),e._uU(3),e.qZA()(),e.TgZ(4,"ul",71)(5,"nz-list-item-action")(6,"a",72),e.NdJ("click",function(){const f=e.CHM(t).$implicit;return e.oxw(2).removeDistanceRule(f)}),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e._uU(9),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(3),e.hij("",t.multiply,"x"),e.xp6(4),e.Oqu(e.lcZ(8,4,"profile.delete")),e.xp6(2),e.AsE(" ",t.distanceFrom," - ",t.distanceTo," ")}}const Me=function(n){return{Authorization:n}};function xe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nz-card")(1,"div")(2,"form",1),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e._UZ(3,"input",2)(4,"input",3),e.TgZ(5,"div",4)(6,"nz-form-item")(7,"nz-form-label",5),e._uU(8,"Name"),e.qZA(),e.TgZ(9,"nz-form-control"),e._UZ(10,"input",6),e.qZA()(),e.TgZ(11,"nz-form-item")(12,"nz-form-label",7),e._uU(13,"Description"),e.qZA(),e.TgZ(14,"nz-form-control"),e._UZ(15,"input",8),e.qZA()(),e.TgZ(16,"nz-form-item")(17,"nz-form-label",9),e._uU(18,"Category"),e.qZA(),e.TgZ(19,"nz-form-control")(20,"nz-select",10),e.YNc(21,ze,1,2,"nz-option",11),e.qZA()()(),e.TgZ(22,"nz-form-item")(23,"nz-form-label",12),e._uU(24,"Max Person Capacity"),e.qZA(),e.TgZ(25,"nz-form-control"),e._UZ(26,"nz-input-number",13),e.qZA()(),e.TgZ(27,"nz-form-item")(28,"nz-form-label",14),e._uU(29,"Base Fare"),e.qZA(),e.TgZ(30,"nz-form-control"),e._UZ(31,"nz-input-number",15),e.qZA()(),e.TgZ(32,"nz-form-item")(33,"nz-form-label",16),e._uU(34,"Per Hundred Meters"),e.qZA(),e.TgZ(35,"nz-form-control"),e._UZ(36,"nz-input-number",17),e.qZA()(),e.TgZ(37,"nz-form-item")(38,"nz-form-label",18),e._uU(39,"Per Minute Drive"),e.qZA(),e.TgZ(40,"nz-form-control"),e._UZ(41,"nz-input-number",19),e.qZA()(),e.TgZ(42,"nz-form-item")(43,"nz-form-label",20),e._uU(44,"Per Minute Wait"),e.qZA(),e.TgZ(45,"nz-form-control"),e._UZ(46,"nz-input-number",21),e.qZA()(),e.TgZ(47,"nz-form-item")(48,"nz-form-label",22),e._uU(49,"Prepay Percent"),e.qZA(),e.TgZ(50,"nz-form-control"),e._UZ(51,"nz-input-number",23),e.qZA()(),e.TgZ(52,"nz-form-item")(53,"nz-form-label",24),e._uU(54,"Minimum Fee"),e.qZA(),e.TgZ(55,"nz-form-control"),e._UZ(56,"nz-input-number",25),e.qZA()(),e.TgZ(57,"nz-form-item")(58,"nz-form-label",26),e._uU(59,"Rounding Factor"),e.qZA(),e.TgZ(60,"nz-form-control"),e._UZ(61,"nz-input-number",27),e.qZA()(),e.TgZ(62,"nz-form-item")(63,"nz-form-label",28),e._uU(64,"Maximum Distance"),e.qZA(),e.TgZ(65,"nz-form-control"),e._UZ(66,"nz-input-number",29),e.qZA()(),e.TgZ(67,"nz-form-item")(68,"nz-form-label",30),e._uU(69,"Search Radius"),e.qZA(),e.TgZ(70,"nz-form-control"),e._UZ(71,"nz-input-number",31),e.qZA()(),e.TgZ(72,"nz-form-item")(73,"nz-form-label",32),e._uU(74,"Payment Method"),e.qZA(),e.TgZ(75,"nz-form-control")(76,"nz-select",33),e.YNc(77,fe,1,2,"nz-option",11),e.qZA()()(),e.TgZ(78,"nz-form-item")(79,"nz-form-label",34),e._uU(80,"Provider Share Percent"),e.qZA(),e.TgZ(81,"nz-form-control"),e._UZ(82,"nz-input-number",35),e.qZA()(),e.TgZ(83,"nz-form-item")(84,"nz-form-label",36),e._uU(85,"Provider Share Flat"),e.qZA(),e.TgZ(86,"nz-form-control"),e._UZ(87,"nz-input-number",37),e.qZA()(),e.TgZ(88,"nz-form-item")(89,"nz-form-label",38),e._uU(90,"Cancelation Total Fee"),e.qZA(),e.TgZ(91,"nz-form-control"),e._UZ(92,"nz-input-number",39),e.qZA()(),e.TgZ(93,"nz-form-item")(94,"nz-form-label",40),e._uU(95,"Cancelation Driver Share"),e.qZA(),e.TgZ(96,"nz-form-control"),e._UZ(97,"nz-input-number",41),e.qZA()(),e.TgZ(98,"nz-form-item")(99,"nz-form-label",42),e._uU(100,"Two way available?"),e.qZA(),e.TgZ(101,"nz-form-control"),e._UZ(102,"nz-switch",43),e.qZA()(),e.TgZ(103,"nz-form-item",44)(104,"nz-form-label",45),e._uU(105),e.ALo(106,"translate"),e.qZA(),e.TgZ(107,"nz-form-control"),e.YNc(108,ve,2,2,"nz-tag",46),e.qZA()(),e.TgZ(109,"nz-form-item")(110,"nz-form-label",45),e._uU(111,"Image"),e.qZA(),e.TgZ(112,"nz-form-control")(113,"nz-upload",47),e.NdJ("nzChange",function(i){return e.CHM(t),e.oxw().handleUploadChange(i)}),e.YNc(114,_e,5,4,"ng-container",0),e.YNc(115,he,1,1,"img",48),e.qZA()()()()(),e.TgZ(116,"nz-card",49)(117,"ul",50),e.YNc(118,Ze,10,6,"li",51),e.qZA(),e.TgZ(119,"div",52)(120,"nz-form-item")(121,"nz-form-label"),e._uU(122),e.ALo(123,"translate"),e.qZA(),e.TgZ(124,"nz-form-control"),e._UZ(125,"nz-time-picker",53,54),e.ALo(127,"translate"),e.qZA()(),e.TgZ(128,"nz-form-item")(129,"nz-form-label"),e._uU(130),e.ALo(131,"translate"),e.qZA(),e.TgZ(132,"nz-form-control"),e._UZ(133,"nz-time-picker",53,55),e.ALo(135,"translate"),e.qZA()(),e.TgZ(136,"nz-form-item")(137,"nz-form-label"),e._uU(138),e.ALo(139,"translate"),e.qZA(),e.TgZ(140,"nz-form-control"),e._UZ(141,"nz-input-number",56,57),e.ALo(143,"translate"),e.qZA()()(),e.TgZ(144,"button",58),e.NdJ("click",function(){return e.CHM(t),e.oxw().insertTimeRule()}),e._uU(145),e.ALo(146,"translate"),e.qZA()(),e.TgZ(147,"nz-card",59)(148,"ul",50),e.YNc(149,Te,10,6,"li",51),e.qZA(),e.TgZ(150,"div",52)(151,"nz-form-item")(152,"nz-form-label"),e._uU(153),e.ALo(154,"translate"),e.qZA(),e.TgZ(155,"nz-form-control"),e._UZ(156,"nz-input-number",56,60),e.ALo(158,"translate"),e.qZA()(),e.TgZ(159,"nz-form-item")(160,"nz-form-label"),e._uU(161),e.ALo(162,"translate"),e.qZA(),e.TgZ(163,"nz-form-control"),e._UZ(164,"nz-input-number",56,61),e.ALo(166,"translate"),e.qZA()(),e.TgZ(167,"nz-form-item")(168,"nz-form-label"),e._uU(169),e.ALo(170,"translate"),e.qZA(),e.TgZ(171,"nz-form-control"),e._UZ(172,"nz-input-number",56,62),e.ALo(174,"translate"),e.qZA()()(),e.TgZ(175,"button",58),e.NdJ("click",function(){return e.CHM(t),e.oxw().insertDistanceRule()}),e._uU(176),e.ALo(177,"translate"),e.qZA()(),e.TgZ(178,"button",63),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSubmit()}),e._uU(179),e.ALo(180,"translate"),e.qZA()()()}if(2&n){const t=a.ngIf,r=e.MAs(126),i=e.MAs(134),f=e.MAs(142),Z=e.MAs(157),C=e.MAs(165),y=e.MAs(173),o=e.oxw();e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(19),e.Q6J("ngForOf",t.serviceCategories),e.xp6(5),e.Q6J("nzMin",0)("nzMax",100),e.xp6(5),e.Q6J("nzFormatter",o.formatterPrice),e.xp6(5),e.Q6J("nzFormatter",o.formatterPrice),e.xp6(5),e.Q6J("nzFormatter",o.formatterPrice),e.xp6(5),e.Q6J("nzFormatter",o.formatterPrice),e.xp6(5),e.Q6J("nzFormatter",o.formatterPercent)("nzParser",o.parserPercent)("nzMax",100)("nzMin",0),e.xp6(5),e.Q6J("nzFormatter",o.formatterPrice),e.xp6(5),e.Q6J("nzFormatter",o.formatterPrice),e.xp6(5),e.Q6J("nzFormatter",o.formatterMeters)("nzParser",o.parserMeters),e.xp6(5),e.Q6J("nzFormatter",o.formatterMeters)("nzParser",o.parserMeters),e.xp6(6),e.Q6J("ngForOf",o.paymentMethods),e.xp6(5),e.Q6J("nzFormatter",o.formatterPercent)("nzParser",o.parserPercent)("nzMax",100)("nzMin",0),e.xp6(5),e.Q6J("nzFormatter",o.formatterPrice),e.xp6(5),e.Q6J("nzFormatter",o.formatterPrice),e.xp6(5),e.Q6J("nzFormatter",o.formatterPrice),e.xp6(8),e.hij(" ",e.lcZ(106,56,"service.Regions")," "),e.xp6(3),e.Q6J("ngForOf",t.regions.nodes),e.xp6(5),e.Q6J("nzAction",o.root+"upload")("nzHeaders",e.VKq(88,Me,"Bearer "+o.jwt))("nzBeforeUpload",o.beforeUpload)("nzShowUploadList",!1),e.xp6(1),e.Q6J("ngIf",!o.avatarUrl),e.xp6(1),e.Q6J("ngIf",o.avatarUrl),e.xp6(2),e.Q6J("nzDataSource",o.form.value.timeMultipliers),e.xp6(1),e.Q6J("ngForOf",o.form.value.timeMultipliers),e.xp6(4),e.Oqu(e.lcZ(123,58,"service.timeMultiplierTable.startTime")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(127,60,"service.timeMultiplierTable.startTime")),e.xp6(5),e.Oqu(e.lcZ(131,62,"service.timeMultiplierTable.endTime")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(135,64,"service.timeMultiplierTable.endTime")),e.xp6(5),e.Oqu(e.lcZ(139,66,"service.timeMultiplierTable.multiplyBy")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(143,68,"service.timeMultiplierTable.multiplyBy")),e.xp6(3),e.Q6J("disabled",null==r.value||null==i.value||""==f.inputElement.nativeElement.value),e.xp6(1),e.hij(" ",e.lcZ(146,70,"service.insertRule")," "),e.xp6(3),e.Q6J("nzDataSource",o.form.value.distanceMultipliers),e.xp6(1),e.Q6J("ngForOf",o.form.value.distanceMultipliers),e.xp6(4),e.Oqu(e.lcZ(154,72,"service.distanceMultiplierTable.distanceFrom")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(158,74,"service.distanceMultiplierTable.distanceFrom")),e.xp6(5),e.Oqu(e.lcZ(162,76,"service.distanceMultiplierTable.distanceTo")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(166,78,"service.distanceMultiplierTable.distanceTo")),e.xp6(5),e.Oqu(e.lcZ(170,80,"service.timeMultiplierTable.multiplyBy")),e.xp6(3),e.s9C("nzPlaceHolder",e.lcZ(174,82,"service.timeMultiplierTable.multiplyBy")),e.xp6(3),e.Q6J("disabled",""==Z.inputElement.nativeElement.value||""==C.inputElement.nativeElement.value||""==y.inputElement.nativeElement.value),e.xp6(1),e.hij(" ",e.lcZ(177,84,"service.insertRule")," "),e.xp6(2),e.Q6J("disabled",o.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(180,86,"profile.submit")," ")}}let k=(()=>{class n{constructor(t,r,i,f,Z,C,y){this.route=t,this.fb=r,this.updateGQL=i,this.createGQL=f,this.setRegionsGQL=Z,this.msg=C,this.routerHelper=y,this.form=this.fb.group({id:[null],name:[null,c.kI.required],description:[null],categoryId:[null,c.kI.required],baseFare:[0,c.kI.required],perHundredMeters:[0,c.kI.required],perMinuteDrive:[0,c.kI.required],perMinuteWait:[0,c.kI.required],prepayPercent:[0,c.kI.required],minimumFee:[0,c.kI.required],roundingFactor:[null],searchRadius:[0,c.kI.required],twoWayAvailable:[!1,c.kI.required],maximumDestinationDistance:[0,c.kI.required],paymentMethod:["CashCredit",c.kI.required],cancellationTotalFee:[0,c.kI.required],cancellationDriverShare:[0,c.kI.required],providerSharePercent:[0,c.kI.required],providerShareFlat:[0,c.kI.required],personCapacity:[null],mediaId:[null,c.kI.required],timeMultipliers:[[]],distanceMultipliers:[[]],regions:[[]]}),this.root=te.N.root,this.loadingUpload=!1,this.formatterPercent=o=>`${o} %`,this.parserPercent=o=>o.replace(" %",""),this.formatterMeters=o=>`${o} m`,this.formatterPrice=o=>`${o}`,this.parserMeters=o=>o.replace(" m",""),this.jwt=localStorage.getItem("somi_admin_token"),this.paymentMethods=Object.values(M.VU2),this.beforeUpload=(o,Ue)=>new ne.y(P=>{var Q;const j="image/jpeg"===o.type||"image/png"===o.type;if(!j)return this.msg.error("You can only upload JPG file!"),void P.complete();const $=(null!==(Q=o.size)&&void 0!==Q?Q:0)/1024/1024<2;if(!$)return this.msg.error("Image must smaller than 2MB!"),void P.complete();P.next(j&&$),P.complete()})}ngOnInit(){this.query=this.route.data.pipe((0,L.U)(t=>t.service)),this.route.data.subscribe(t=>{if(null!=t.service.data.service){if(t.service.data.service.regions.length>0){const r=t.service.data.service.regions[0].currency;this.formatterPrice=i=>null!=i?`${i} ${r}`:""}t.service.data.service.regions=t.service.data.service.regions.map(r=>r.id),this.form.patchValue(t.service.data.service),this.avatarUrl=t.service.data.service.media.address}})}onSubmit(){var t,r;return(0,q.mG)(this,void 0,void 0,function*(){const i=this.form.value,{id:f,regions:Z}=i,C=(0,q._T)(i,["id","regions"]);if(Z.length<1)return void this.msg.error("Select at least one region which this service can be ordered from.");let y=f;try{y=null==f?null===(t=(yield(0,S.z)(this.createGQL.mutate({input:C}))).data)||void 0===t?void 0:t.createOneService.id:null===(r=(yield(0,S.z)(this.updateGQL.mutate({id:f,input:C}))).data)||void 0===r?void 0:r.updateOneService.id,yield(0,S.z)(this.setRegionsGQL.mutate({id:y,relationIds:Z})),this.routerHelper.goToParent(this.route)}catch(o){this.msg.error(o.message)}})}insertTimeRule(){null==this.form.value.timeMultipliers&&(this.form.value.timeMultipliers=[]),this.form.value.timeMultipliers.push({startTime:this.timeStartPicker.inputRef.nativeElement.value,endTime:this.timeEndPicker.inputRef.nativeElement.value,multiply:parseFloat(this.timeMultiplyInput.inputElement.nativeElement.value)})}removeTimeRule(t){this.form.value.timeMultipliers=this.form.value.timeMultipliers.filter(r=>r!=t)}insertDistanceRule(){null==this.form.value.distanceMultipliers&&(this.form.value.distanceMultipliers=[]),this.form.value.distanceMultipliers.push({distanceFrom:parseInt(this.distanceFromInput.inputElement.nativeElement.value),distanceTo:parseInt(this.distanceToInput.inputElement.nativeElement.value),multiply:parseFloat(this.distanceMultiplyInput.inputElement.nativeElement.value)})}removeDistanceRule(t){const r=this.form.value.distanceMultipliers.filter(i=>i!=t);this.form.patchValue({distanceMultipliers:r})}handleRegionCheckChange(t,r){t?(this.formatterPrice=i=>`${i} ${r.currency}`,this.form.value.regions.indexOf(r.id)<0&&this.form.value.regions.push(r.id)):this.form.value.regions=this.form.value.regions.filter(i=>i!=r.id)}handleUploadChange(t){switch(t.file.status){case"uploading":this.loadingUpload=!0;break;case"done":this.loadingUpload=!1,this.form.patchValue({mediaId:t.file.response.id}),this.avatarUrl=t.file.response.address;break;case"error":this.msg.error("Network error"),this.loadingUpload=!1}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.gz),e.Y36(c.qu),e.Y36(M.cv),e.Y36(M.wnc),e.Y36(M.OB9),e.Y36(J.dD),e.Y36(N.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-management-services-view"]],viewQuery:function(t,r){if(1&t&&(e.Gf(ce,5),e.Gf(me,5),e.Gf(ue,5),e.Gf(de,5),e.Gf(pe,5),e.Gf(ge,5)),2&t){let i;e.iGM(i=e.CRH())&&(r.timeStartPicker=i.first),e.iGM(i=e.CRH())&&(r.timeEndPicker=i.first),e.iGM(i=e.CRH())&&(r.timeMultiplyInput=i.first),e.iGM(i=e.CRH())&&(r.distanceFromInput=i.first),e.iGM(i=e.CRH())&&(r.distanceToInput=i.first),e.iGM(i=e.CRH())&&(r.distanceMultiplyInput=i.first)}},decls:2,vars:3,consts:[[4,"ngIf"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],["type","hidden","hidden","","formControlName","id"],["type","hidden","hidden","","formControlName","regions"],[1,"lg:grid","lg:grid-cols-4","lg:gap-2"],["nzFor","name","nzRequired",""],["nz-input","","formControlName","name","id","name"],["nzFor","description"],["nz-input","","formControlName","description","id","description"],["nzFor","categoryId","nzRequired",""],["formControlName","categoryId","id","categoryId"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","personCapacity"],["formControlName","personCapacity","id","personCapacity",3,"nzMin","nzMax"],["nzFor","baseFare","nzRequired",""],["formControlName","baseFare","id","baseFare","nzRequired","",3,"nzFormatter"],["nzRequired","","nzFor","perHundredMeters"],["formControlName","perHundredMeters","id","perHundredMeters","nzRequired","",3,"nzFormatter"],["nzRequired","","nzFor","perMinuteDrive"],["formControlName","perMinuteDrive","id","perMinuteDrive","nzRequired","",3,"nzFormatter"],["nzRequired","","nzFor","perMinuteWait"],["formControlName","perMinuteWait","id","perMinuteWait","nzRequired","",3,"nzFormatter"],["nzRequired","","nzFor","prepayPercent"],["formControlName","prepayPercent","id","prepayPercent","nzRequired","",3,"nzFormatter","nzParser","nzMax","nzMin"],["nzRequired","","nzFor","minimumFee"],["formControlName","minimumFee","id","minimumFee","nzRequired","",3,"nzFormatter"],["nzFor","roundingFactor"],["formControlName","roundingFactor","id","roundingFactor",3,"nzFormatter"],["nzRequired","","nzFor","maximumDestinationDistance"],["formControlName","maximumDestinationDistance","id","maximumDestinationDistance","nzRequired","",3,"nzFormatter","nzParser"],["nzRequired","","nzFor","searchRadius"],["formControlName","searchRadius","id","searchRadius","nzRequired","",3,"nzFormatter","nzParser"],["nzRequired","","nzFor","paymentMethod"],["formControlName","paymentMethod","id","paymentMethod"],["nzFor","providerSharePercent","nzRequired",""],["formControlName","providerSharePercent","id","providerSharePercent","nzRequired","",3,"nzFormatter","nzParser","nzMax","nzMin"],["nzFor","providerShareFlat","nzRequired",""],["formControlName","providerShareFlat","id","providerShareFlat","nzRequired","",3,"nzFormatter"],["nzFor","cancellationTotalFee","nzRequired",""],["formControlName","cancellationTotalFee","id","cancellationTotalFee","nzRequired","",3,"nzFormatter"],["nzFor","cancellationDriverShare","nzRequired",""],["formControlName","cancellationDriverShare","id","cancellationDriverShare","nzRequired","",3,"nzFormatter"],["nzFor","twoWayAvailable","nzRequired",""],["formControlName","twoWayAvailable","id","twoWayAvailable"],[1,"lg:col-span-4"],["nzRequired",""],["nzMode","checkable",3,"nzChecked","nzCheckedChange",4,"ngFor","ngForOf"],["nzListType","picture-card",3,"nzAction","nzHeaders","nzBeforeUpload","nzShowUploadList","nzChange"],["style","width: 100%",3,"src",4,"ngIf"],["nzTitle","Time Multiplier",1,"lg:col-span-4"],["nz-list","","nzBordered","",3,"nzDataSource"],["nz-list-item","",4,"ngFor","ngForOf"],[1,"md:grid","md:grid-cols-3","md:gap-2","mt-2"],["nzFormat","HH:mm",3,"nzPlaceHolder"],["timeStartPicker",""],["timeEndPicker",""],[3,"nzPlaceHolder"],["timeMultiplyInput",""],["nz-button","","nzType","default",1,"float-right",3,"disabled","click"],["nzTitle","Distance Multiplier",1,"lg:col-span-4"],["distanceFromInput",""],["distanceToInput",""],["distanceMultiplyInput",""],["nz-button","","nzType","default",1,"float-right","mt-2",3,"disabled","click"],[3,"nzValue","nzLabel"],["nzMode","checkable",3,"nzChecked","nzCheckedChange"],["nz-icon","",1,"upload-icon",3,"nzType"],[1,"ant-upload-text"],[2,"width","100%",3,"src"],["nz-list-item",""],["nz-typography",""],["nz-list-item-actions",""],[3,"click"]],template:function(t,r){if(1&t&&(e.YNc(0,xe,181,90,"nz-card",0),e.ALo(1,"async")),2&t){let i;e.Q6J("ngIf",null==(i=e.lcZ(1,1,r.query))?null:i.data)}},directives:[b.O5,h.bd,c._Y,c.JL,A.Lr,c.sg,c.Fj,c.JJ,c.u,w.SK,A.Nx,w.t3,A.iK,A.Fd,O.Zp,D.Vq,b.sg,D.Ip,re._,ie.i,oe.j,ae.FY,d.w,le.Ls,R.n_,R.AA,R.nk,R.KC,se.m4,m.ix,u.dQ],pipes:[b.Ov,T.X$],styles:["nz-input-number[_ngcontent-%COMP%]{width:100%}","nz-time-picker[_ngcontent-%COMP%]{width:100%}"]}),n})();var Ce=s(1945);function ye(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"nz-card",7)(1,"div")(2,"p",8),e._uU(3,"Delete Category"),e.qZA(),e.TgZ(4,"p",9),e._uU(5," Be careful with this action. It is irreversible. "),e.qZA(),e.TgZ(6,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().deleteCategory()}),e._uU(7," Detete "),e.qZA()()()}}let V=(()=>{class n{constructor(t,r,i,f,Z,C,y){this.route=t,this.updateGQL=r,this.createGQL=i,this.deleteGQL=f,this.fb=Z,this.routerHelper=C,this.msg=y,this.form=this.fb.group({id:[null],name:[null,c.kI.required]})}ngOnDestroy(){this.subscription.unsubscribe()}ngOnInit(){this.subscription=this.route.data.subscribe(t=>null!=t.serviceCategory?this.form.patchValue(t.serviceCategory.data.serviceCategory):null)}onSubmit(){return(0,q.mG)(this,void 0,void 0,function*(){const t=this.form.value,{id:r}=t,i=(0,q._T)(t,["id"]);null==r?yield(0,S.z)(this.createGQL.mutate({input:i})):yield(0,S.z)(this.updateGQL.mutate({id:r,input:i})),this.routerHelper.goToParent(this.route)})}deleteCategory(){return(0,q.mG)(this,void 0,void 0,function*(){const t=this.form.value.id;try{yield(0,S.z)(this.deleteGQL.mutate({id:t})),this.routerHelper.goToParent(this.route),this.msg.success("Deleted!")}catch(r){this.msg.error(r.message)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.gz),e.Y36(M.VJo),e.Y36(M.REG),e.Y36(M.aEb),e.Y36(c.qu),e.Y36(N.b),e.Y36(J.dD))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-management-service-category-view"]],decls:11,vars:4,consts:[["nzBackIcon","","nzTitle","Service Category","nzSubtitle","Input service category details below.",3,"nzGhost"],["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","name"],["nzErrorTip","The input is not valid Name"],["nz-input","","formControlName","name","id","name"],["nz-button","","nzType","default",1,"float-right",3,"disabled"],["class","mt-2","nzTitle","Dangerous Area",4,"ngIf"],["nzTitle","Dangerous Area",1,"mt-2"],[1,"text-lg","leading-6","font-medium","text-gray-900"],[1,"mt-2","max-w-xl","text-sm","text-gray-500"],["nz-button","","nzDanger","",1,"mt-2",3,"click"]],template:function(t,r){1&t&&(e._UZ(0,"nz-page-header",0),e.TgZ(1,"nz-card")(2,"form",1),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(3,"nz-form-item")(4,"nz-form-label",2),e._uU(5,"Name"),e.qZA(),e.TgZ(6,"nz-form-control",3),e._UZ(7,"input",4),e.qZA()(),e.TgZ(8,"button",5),e._uU(9," Save "),e.qZA()()(),e.YNc(10,ye,8,0,"nz-card",6)),2&t&&(e.Q6J("nzGhost",!1),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("disabled",r.form.invalid),e.xp6(2),e.Q6J("ngIf",null!==(null==r.form.value?null:r.form.value.id)))},directives:[Ce.$O,h.bd,c._Y,c.JL,A.Lr,c.sg,w.SK,A.Nx,w.t3,A.iK,A.Fd,O.Zp,c.Fj,c.JJ,c.u,m.ix,u.dQ,d.w,b.O5],encapsulation:2}),n})();var be=s(7633);let E=(()=>{class n{constructor(t,r){this.paging=t,this.gql=r}resolve(t,r){return this.gql.fetch()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(be.w),e.LFG(M.JQL))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),H=(()=>{class n{constructor(t){this.gql=t}resolve(t,r){return this.gql.fetch({id:t.params.id})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(M.YM8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),G=(()=>{class n{constructor(t){this.gql=t}resolve(t,r){return this.gql.fetch({id:t.params.id})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(M.hW4))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Y=(()=>{class n{constructor(t){this.gql=t}resolve(t,r){return this.gql.fetch()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(M.Nh5))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();const Ae=[{path:"",component:ee,resolve:{services:E},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",component:k,resolve:{service:H}},{path:"new",component:k,resolve:{service:Y}},{path:"category/view/:id",component:V,resolve:{serviceCategory:G}},{path:"category/new",component:V}];let Se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[E,H,Y,G],imports:[[_.Bz.forChild(Ae)],_.Bz]}),n})();var Fe=s(6889);let qe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[F.k],imports:[[Se,Fe.m]]}),n})()}}]);