"use strict";(self.webpackChunksomiadmin=self.webpackChunksomiadmin||[]).push([[821],{3821:(H,g,o)=>{o.r(g),o.d(g,{ManagementUsersModule:()=>j});var m=o(9826),h=o(655),i=o(3075),z=o(4362),L=o(2583),Z=o(4004),y=o(3905),n=o(5e3),x=o(9083),d=o(1945),q=o(7484),c=o(4546),N=o(1894),v=o(1047),T=o(8054),p=o(9808),U=o(2683),A=o(6042),O=o(2643);function Q(e,r){if(1&e&&n._UZ(0,"nz-option",27),2&e){const t=r.$implicit;n.Q6J("nzValue",t.id)("nzLabel",t.title)}}function J(e,r){if(1&e&&n._UZ(0,"nz-option",30),2&e){const t=r.$implicit;n.Q6J("nzLabel",t.name+" ("+t.dial_code+")")("nzValue",t.dial_code)}}function M(e,r){if(1&e&&(n.TgZ(0,"nz-select",28),n.YNc(1,J,1,2,"nz-option",29),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Q6J("ngForOf",t.countryCodes)}}function R(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"button",31),n.NdJ("click",function(){return n.CHM(t),n.oxw().submitForm()}),n._uU(1," Register "),n.qZA()}if(2&e){const t=n.oxw();n.Q6J("disabled",t.form.invalid)}}const P=function(e){return[e]};let w=(()=>{class e{constructor(t,a,s,l){this.fb=t,this.createGQL=a,this.routerHelper=s,this.route=l,this.form=this.fb.group({firstName:[null],lastName:[null],roleId:[null,i.kI.required],phoneNumberPrefix:["+1",i.kI.required],phoneNumber:[null,i.kI.required],userName:[null,i.kI.required],password:[null,i.kI.required]}),this.countryCodes=L.k}ngOnInit(){this.query=this.route.data.pipe((0,Z.U)(t=>t.operator))}submitForm(){return(0,h.mG)(this,void 0,void 0,function*(){const t=this.form.value,{phoneNumber:a,phoneNumberPrefix:s}=t,l=(0,h._T)(t,["phoneNumber","phoneNumberPrefix"]);yield(0,y.z)(this.createGQL.mutate({input:Object.assign({mobileNumber:`${s.substring(1)}${a}`},l)})),this.routerHelper.goToParent(this.route)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(i.qu),n.Y36(z.smv),n.Y36(x.b),n.Y36(m.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-operator-new"]],decls:45,vars:9,consts:[["nzBackIcon","","nzTitle","New Operator","nzSubtitle","Input Operator's details below.",3,"nzGhost"],[3,"nzActions"],["nz-form","",3,"formGroup","ngSubmit"],["nzRequired","","nzFor","firstName"],["nzErrorTip","The input is not valid First Name"],["nz-input","","required","","formControlName","firstName","id","firstName"],["nzRequired","","nzFor","lastName"],["nzErrorTip","The input is not valid Last Name"],["nz-input","","required","","formControlName","lastName","id","lastName"],["nzRequired","","nzFor","roleId"],["nzErrorTip","Role is not selected"],["required","","formControlName","roleId"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzRequired","","nzFor","userName"],["nzErrorTip","The input is not valid User Name"],["nz-input","","required","","formControlName","userName","id","userName"],["nzRequired","","nzFor","password"],["nzErrorTip","The input is not valid Passowrd"],["nz-input","","required","","formControlName","password","id","password"],["nzFor","phoneNumber","nzRequired",""],[3,"nzAddOnBefore"],["addOnBeforeTemplate",""],["formControlName","phoneNumber","id","phoneNumber","nz-input",""],["nzFor","email"],["nzErrorTip","The input is not valid E-mail"],["nz-input","","formControlName","email","id","email"],["tmplActions",""],[3,"nzValue","nzLabel"],["formControlName","phoneNumberPrefix",1,"phone-select"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"],["nz-button","","nzType","default",3,"disabled","click"]],template:function(t,a){if(1&t&&(n._UZ(0,"nz-page-header",0),n.TgZ(1,"nz-card",1)(2,"form",2),n.NdJ("ngSubmit",function(){return a.submitForm()}),n.TgZ(3,"nz-form-item")(4,"nz-form-label",3),n._uU(5,"First Name"),n.qZA(),n.TgZ(6,"nz-form-control",4),n._UZ(7,"input",5),n.qZA()(),n.TgZ(8,"nz-form-item")(9,"nz-form-label",6),n._uU(10,"Last Name"),n.qZA(),n.TgZ(11,"nz-form-control",7),n._UZ(12,"input",8),n.qZA()(),n.TgZ(13,"nz-form-item")(14,"nz-form-label",9),n._uU(15,"Role"),n.qZA(),n.TgZ(16,"nz-form-control",10)(17,"nz-select",11),n.YNc(18,Q,1,2,"nz-option",12),n.ALo(19,"async"),n.qZA()()(),n.TgZ(20,"nz-form-item")(21,"nz-form-label",13),n._uU(22,"User Name"),n.qZA(),n.TgZ(23,"nz-form-control",14),n._UZ(24,"input",15),n.qZA()(),n.TgZ(25,"nz-form-item")(26,"nz-form-label",16),n._uU(27,"Password"),n.qZA(),n.TgZ(28,"nz-form-control",17),n._UZ(29,"input",18),n.qZA()(),n.TgZ(30,"nz-form-item")(31,"nz-form-label",19),n._uU(32,"Phone Number"),n.qZA(),n.TgZ(33,"nz-form-control")(34,"nz-input-group",20),n.YNc(35,M,2,1,"ng-template",null,21,n.W1O),n._UZ(37,"input",22),n.qZA()()(),n.TgZ(38,"nz-form-item")(39,"nz-form-label",23),n._uU(40,"E-mail"),n.qZA(),n.TgZ(41,"nz-form-control",24),n._UZ(42,"input",25),n.qZA()(),n.YNc(43,R,2,1,"ng-template",null,26,n.W1O),n.qZA()()),2&t){const s=n.MAs(36),l=n.MAs(44);let f;n.Q6J("nzGhost",!1),n.xp6(1),n.Q6J("nzActions",n.VKq(7,P,l)),n.xp6(1),n.Q6J("formGroup",a.form),n.xp6(16),n.Q6J("ngForOf",null==(f=n.lcZ(19,5,a.query))||null==f.data?null:f.data.operatorRoles),n.xp6(16),n.Q6J("nzAddOnBefore",s)}},directives:[d.$O,q.bd,i._Y,i.JL,c.Lr,i.sg,N.SK,c.Nx,N.t3,c.iK,c.Fd,v.Zp,i.Fj,i.Q7,i.JJ,i.u,T.Vq,p.sg,T.Ip,v.gB,U.w,A.ix,O.dQ],pipes:[p.Ov],encapsulation:2}),e})(),C=(()=>{class e{constructor(t){this.gql=t}resolve(t,a){return this.gql.fetch({})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(z.Fp1))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var I=o(5233),F=o(7633),Y=o(647),u=o(939),S=o(1062);function G(e,r){if(1&e&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td")(6,"a",7),n._uU(7),n.ALo(8,"translate"),n.qZA()()()),2&e){const t=r.$implicit;n.xp6(2),n.AsE("",t.firstName," ",t.lastName,""),n.xp6(2),n.Oqu(t.userName),n.xp6(2),n.Q6J("routerLink","view/"+t.id),n.xp6(1),n.Oqu(n.lcZ(8,5,"table.details"))}}function _(e,r){if(1&e){const t=n.EpF();n.TgZ(0,"nz-table",4,5),n.NdJ("nzQueryParams",function(s){return n.CHM(t),n.oxw().tableService.onTableQueryParamsChange(s)}),n.TgZ(2,"thead")(3,"tr")(4,"th"),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.TgZ(7,"th"),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"th"),n._uU(11),n.ALo(12,"translate"),n.qZA()()(),n.TgZ(13,"tbody"),n.YNc(14,G,9,7,"tr",6),n.qZA()()}if(2&e){const t=r.ngIf,a=n.MAs(1);n.Q6J("nzFrontPagination",!1)("nzData",t.nodes)("nzTotal",t.totalCount),n.xp6(5),n.Oqu(n.lcZ(6,7,"profile.name")),n.xp6(3),n.Oqu(n.lcZ(9,9,"profile.userName")),n.xp6(3),n.Oqu(n.lcZ(12,11,"profile.actions")),n.xp6(3),n.Q6J("ngForOf",a.data)}}let B=(()=>{class e{constructor(t,a,s,l){this.route=t,this.router=a,this.tagColor=s,this.tableService=l}ngOnInit(){this.query=this.route.data.pipe((0,Z.U)(t=>t.operators))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(m.gz),n.Y36(m.F0),n.Y36(I.k),n.Y36(F.w))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-users-list"]],decls:9,vars:7,consts:[["nzBackIcon","","nzTitle","Operators","nzSubtitle","Users of Admin panel (Operators and admins)",3,"nzGhost"],["nz-button","","nzType","default","routerLink","new"],["nz-icon","","nzType","plus"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams",4,"ngIf"],["nzShowSizeChanger","","nzBordered","",3,"nzFrontPagination","nzData","nzTotal","nzQueryParams"],["table",""],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,a){if(1&t&&(n.TgZ(0,"nz-page-header",0)(1,"nz-page-header-extra")(2,"button",1),n._UZ(3,"i",2),n._uU(4),n.ALo(5,"translate"),n.qZA()(),n.TgZ(6,"nz-page-header-content"),n.YNc(7,_,15,13,"nz-table",3),n.ALo(8,"async"),n.qZA()()),2&t){let s;n.Q6J("nzGhost",!1),n.xp6(4),n.hij("",n.lcZ(5,3,"profile.add")," "),n.xp6(3),n.Q6J("ngIf",null==(s=n.lcZ(8,5,a.query))||null==s.data?null:s.data.operators)}},directives:[d.$O,d.Jp,A.ix,O.dQ,U.w,m.rH,Y.Ls,d.u5,p.O5,u.N8,u.Om,u.$Z,u.Uo,u._C,u.p0,p.sg,m.yS],pipes:[S.X$,p.Ov],encapsulation:2}),e})(),b=(()=>{class e{constructor(t,a){this.paging=t,this.gql=a}resolve(t,a){const s=this.paging.deserializeQueryParams(t.queryParams);return this.gql.fetch(s)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(F.w),n.LFG(z.eqc))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();const E=[{path:"",component:B,resolve:{operators:b},runGuardsAndResolvers:"paramsOrQueryParamsChange"},{path:"view/:id",loadChildren:()=>o.e(653).then(o.bind(o,653)).then(e=>e.UserViewModule)},{path:"new",component:w,resolve:{operator:C}}];let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({providers:[b,C],imports:[[m.Bz.forChild(E)],m.Bz]}),e})();var $=o(6889);let j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[V,$.m]]}),e})()}}]);