"use strict";(self.webpackChunksomiadmin=self.webpackChunksomiadmin||[]).push([[493],{1493:(G,z,o)=>{o.r(z),o.d(z,{ComplaintViewModule:()=>D});var a=o(9808),l=o(9826),A=o(655),m=o(4362),g=o(5233),Z=o(4004),v=o(3905),T=o(4610),t=o(5e3),h=o(9083),L=o(9727),w=o(7484),p=o(1945),q=o(8481),c=o(3098),U=o(6042),V=o(2643),y=o(2683),u=o(3677),S=o(647),C=o(4219),d=o(868),f=o(1062);function O(n,r){1&n&&(t.TgZ(0,"a",12),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"profile.details")))}function I(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"nz-page-header")(1,"nz-page-header-title"),t._uU(2),t.qZA(),t.TgZ(3,"nz-page-header-tags")(4,"nz-tag",1),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"nz-page-header-content")(8,"div",2)(9,"div",3)(10,"nz-descriptions")(11,"nz-descriptions-item",4),t.ALo(12,"translate"),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"nz-descriptions-item",4),t.ALo(16,"translate"),t._uU(17),t.qZA()()()()(),t.TgZ(18,"nz-page-header-extra")(19,"button",5),t._uU(20),t.ALo(21,"translate"),t._UZ(22,"i",6),t.qZA(),t.TgZ(23,"nz-dropdown-menu",null,7)(25,"ul",8)(26,"li",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.updateStatus(i.complaintStatus.Resolved)}),t._uU(27,"Resolved"),t.qZA(),t.TgZ(28,"li",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.updateStatus(i.complaintStatus.UnderInvestigation)}),t._uU(29,"Under Investigation"),t.qZA()()()(),t.TgZ(30,"nz-page-header-footer")(31,"nz-tabset",10)(32,"nz-tab"),t.YNc(33,O,3,3,"a",11),t.qZA()(),t._UZ(34,"router-outlet"),t.qZA()()}if(2&n){const e=r.ngIf,s=t.MAs(24),i=t.oxw();t.xp6(2),t.Oqu(e.subject),t.xp6(2),t.Q6J("nzColor",i.tagColor.complaintStatus(e.status)),t.xp6(1),t.Oqu(t.lcZ(6,11,"enum.complaintStatus."+i.camelCase(e.status))),t.xp6(6),t.s9C("nzTitle",t.lcZ(12,13,"complaint.inscriptionTime")),t.Q6J("nzSpan",1),t.xp6(2),t.hij("",t.xi3(14,15,e.inscriptionTimestamp,"short")," "),t.xp6(2),t.s9C("nzTitle",t.lcZ(16,18,"complaint.content")),t.Q6J("nzSpan",2),t.xp6(2),t.Oqu(e.content),t.xp6(2),t.Q6J("nzDropdownMenu",s),t.xp6(1),t.hij(" ",t.lcZ(21,20,"driver.profile.changeStatus")," ")}}let J=(()=>{class n{constructor(e,s,i,H,X){this.route=e,this.tagColor=s,this.updateGql=i,this.routerHelper=H,this.msg=X,this.camelCase=T.eV,this.complaintStatus=m.P5X}ngOnInit(){this.query=this.route.data.pipe((0,Z.U)(e=>e.complaint))}updateStatus(e){return(0,A.mG)(this,void 0,void 0,function*(){yield(0,v.z)(this.updateGql.mutate({id:this.route.snapshot.params.id,status:e})),this.routerHelper.refresh(this.route),this.msg.success("Updated!")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz),t.Y36(g.k),t.Y36(m.FLW),t.Y36(h.b),t.Y36(L.dD))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-complaint-view"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"nzColor"],[1,"content"],[1,"main"],[3,"nzTitle","nzSpan"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["menu4","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],["nzLinkRouter","",1,"mb-2"],["nz-tab-link","","routerLink","info",4,"nzTabLink"],["nz-tab-link","","routerLink","info"]],template:function(e,s){if(1&e&&(t.TgZ(0,"nz-card"),t.YNc(1,I,35,22,"nz-page-header",0),t.ALo(2,"async"),t.qZA()),2&e){let i;t.xp6(1),t.Q6J("ngIf",null==(i=t.lcZ(2,1,s.query))||null==i.data?null:i.data.complaint)}},directives:[w.bd,a.O5,p.$O,p.u9,p.ZJ,q.j,p.u5,c.R7,c.uj,p.Jp,U.ix,V.dQ,y.w,u.wA,u.cm,S.Ls,u.RR,C.wO,C.r9,p.$,d.xH,d.xw,d.Fx,d.Ao,l.yS,l.lC],pipes:[a.Ov,f.X$,a.uU],encapsulation:2}),n})();var Q=o(4401),R=o(5390);function N(n,r){if(1&n&&(t.TgZ(0,"nz-descriptions",1),t.ALo(1,"translate"),t.TgZ(2,"nz-descriptions-item",2),t.ALo(3,"translate"),t._uU(4),t.qZA(),t.TgZ(5,"nz-descriptions-item",2),t.ALo(6,"translate"),t._uU(7),t.ALo(8,"phone"),t.qZA(),t.TgZ(9,"nz-descriptions-item",2),t.ALo(10,"translate"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"nz-descriptions-item",3),t.ALo(14,"translate"),t._UZ(15,"nz-badge",4),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"nz-descriptions-item",2),t.ALo(18,"translate"),t.TgZ(19,"a",5),t._uU(20,"View"),t.qZA()()()),2&n){const e=r.ngIf,s=t.oxw().ngIf,i=t.oxw();t.s9C("nzTitle",t.lcZ(1,14,"profile.driverInfo")+(s.requestedByDriver?" (Sender)":"")),t.xp6(2),t.s9C("nzTitle",t.lcZ(3,16,"profile.name")),t.xp6(2),t.AsE("",e.firstName," ",e.lastName,""),t.xp6(1),t.s9C("nzTitle",t.lcZ(6,18,"profile.mobileNumber")),t.xp6(2),t.Oqu(t.lcZ(8,20,e.mobileNumber.toString())),t.xp6(2),t.s9C("nzTitle",t.lcZ(10,22,"profile.registeredOn")),t.xp6(2),t.Oqu(t.xi3(12,24,e.registrationTimestamp,"short")),t.xp6(2),t.s9C("nzTitle",t.lcZ(14,27,"profile.status")),t.Q6J("nzSpan",2),t.xp6(2),t.Q6J("nzStatus",i.tagColor.driver(e.status))("nzText",t.lcZ(16,29,"enum.driver.status."+i.camelCase(e.status))),t.xp6(2),t.s9C("nzTitle",t.lcZ(18,31,"profile.view")),t.xp6(2),t.Q6J("routerLink","/../drivers/all/view/"+e.id)}}function M(n,r){if(1&n&&(t.TgZ(0,"div")(1,"nz-descriptions",1),t.ALo(2,"translate"),t.TgZ(3,"nz-descriptions-item",2),t.ALo(4,"translate"),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"nz-descriptions-item",2),t.ALo(8,"translate"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"nz-descriptions-item",2),t.ALo(12,"translate"),t._uU(13),t.ALo(14,"date"),t.qZA(),t.TgZ(15,"nz-descriptions-item",2),t.ALo(16,"translate"),t._uU(17),t.ALo(18,"currency"),t.qZA(),t.TgZ(19,"nz-descriptions-item",2),t.ALo(20,"translate"),t._uU(21),t.ALo(22,"currency"),t.qZA(),t.TgZ(23,"nz-descriptions-item",3),t.ALo(24,"translate"),t._UZ(25,"nz-badge",4),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"nz-descriptions-item",3),t.ALo(28,"translate"),t._uU(29),t.qZA(),t.TgZ(30,"nz-descriptions-item",2),t.ALo(31,"translate"),t.TgZ(32,"a",5),t._uU(33),t.ALo(34,"translate"),t.qZA()()(),t.YNc(35,N,21,33,"nz-descriptions",6),t.TgZ(36,"nz-descriptions",1),t.ALo(37,"translate"),t.TgZ(38,"nz-descriptions-item",2),t.ALo(39,"translate"),t._uU(40),t.qZA(),t.TgZ(41,"nz-descriptions-item",2),t.ALo(42,"translate"),t._uU(43),t.ALo(44,"phone"),t.qZA(),t.TgZ(45,"nz-descriptions-item",2),t.ALo(46,"translate"),t._uU(47),t.ALo(48,"date"),t.qZA(),t.TgZ(49,"nz-descriptions-item",3),t.ALo(50,"translate"),t._UZ(51,"nz-badge",4),t.ALo(52,"translate"),t.qZA(),t.TgZ(53,"nz-descriptions-item",2),t.ALo(54,"translate"),t.TgZ(55,"a",5),t._uU(56),t.ALo(57,"translate"),t.qZA()()()()),2&n){const e=r.ngIf,s=t.oxw();t.xp6(1),t.s9C("nzTitle",t.lcZ(2,37,"profile.requestInfo")),t.xp6(2),t.s9C("nzTitle",t.lcZ(4,39,"requests.expectedTime")),t.xp6(2),t.Oqu(null!==e.order.expectedTimestamp?t.xi3(6,41,e.order.expectedTimestamp,"short"):"-"),t.xp6(2),t.s9C("nzTitle",t.lcZ(8,44,"requests.startTime")),t.xp6(2),t.Oqu(null!==e.order.startTimestamp?t.xi3(10,46,e.order.startTimestamp,"short"):"-"),t.xp6(2),t.s9C("nzTitle",t.lcZ(12,49,"requests.finishTime")),t.xp6(2),t.Oqu(null!==e.order.finishTimestamp?t.xi3(14,51,e.order.finishTimestamp,"short"):"-"),t.xp6(2),t.s9C("nzTitle",t.lcZ(16,54,"requests.costAfterCoupon")),t.xp6(2),t.Oqu(t.xi3(18,56,e.order.costAfterCoupon,e.order.currency)),t.xp6(2),t.s9C("nzTitle",t.lcZ(20,59,"requests.estimatedCost")),t.xp6(2),t.Oqu(t.xi3(22,61,e.order.costBest,e.order.currency)),t.xp6(2),t.s9C("nzTitle",t.lcZ(24,64,"profile.status")),t.Q6J("nzSpan",2),t.xp6(2),t.Q6J("nzStatus",s.tagColor.orderStatus(e.order.status))("nzText",t.lcZ(26,66,"enum.request."+e.order.status)),t.xp6(2),t.s9C("nzTitle",t.lcZ(28,68,"profile.locations")),t.Q6J("nzSpan",3),t.xp6(2),t.hij(" ",e.order.addresses.join(" -> ")," "),t.xp6(1),t.s9C("nzTitle",t.lcZ(31,70,"profile.view")),t.xp6(2),t.Q6J("routerLink","/../requests/view/"+e.order.id),t.xp6(1),t.Oqu(t.lcZ(34,72,"profile.view")),t.xp6(2),t.Q6J("ngIf",e.order.driver),t.xp6(1),t.s9C("nzTitle",t.lcZ(37,74,"profile.riderInfo")+(e.requestedByDriver?"":" (Sender)")),t.xp6(2),t.s9C("nzTitle",t.lcZ(39,76,"profile.name")),t.xp6(2),t.AsE("",e.order.rider.firstName," ",e.order.rider.lastName,""),t.xp6(1),t.s9C("nzTitle",t.lcZ(42,78,"profile.mobileNumber")),t.xp6(2),t.Oqu(t.lcZ(44,80,e.order.rider.mobileNumber)),t.xp6(2),t.s9C("nzTitle",t.lcZ(46,82,"profile.registeredOn")),t.xp6(2),t.Oqu(null!==e.order.rider.registrationTimestamp?t.xi3(48,84,e.order.rider.registrationTimestamp,"short"):"-"),t.xp6(2),t.s9C("nzTitle",t.lcZ(50,87,"profile.status")),t.Q6J("nzSpan",2),t.xp6(2),t.Q6J("nzStatus",s.tagColor.rider(e.order.rider.status))("nzText",t.lcZ(52,89,"enum.rider.status."+e.order.rider.status.toLowerCase())),t.xp6(2),t.s9C("nzTitle",t.lcZ(54,91,"profile.view")),t.xp6(2),t.Q6J("routerLink","/../riders/view/"+e.order.rider.id),t.xp6(1),t.Oqu(t.lcZ(57,93,"profile.view"))}}let Y=(()=>{class n{constructor(e,s){this.route=e,this.tagColor=s,this.camelCase=T.eV}ngOnInit(){var e;this.query=null===(e=this.route.parent)||void 0===e?void 0:e.data.pipe((0,Z.U)(s=>s.complaint))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz),t.Y36(g.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-complaint-view-info"]],decls:2,vars:3,consts:[[4,"ngIf"],["nzBordered","",1,"mt-2",3,"nzTitle"],[3,"nzTitle"],[3,"nzTitle","nzSpan"],[3,"nzStatus","nzText"],[3,"routerLink"],["nzBordered","","class","mt-2",3,"nzTitle",4,"ngIf"]],template:function(e,s){if(1&e&&(t.YNc(0,M,58,95,"div",0),t.ALo(1,"async")),2&e){let i;t.Q6J("ngIf",null==(i=t.lcZ(1,1,s.query))||null==i.data?null:i.data.complaint)}},directives:[a.O5,c.R7,c.uj,Q.x7,l.yS],pipes:[a.Ov,f.X$,a.uU,a.H9,R.E],encapsulation:2}),n})(),F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-complaint-view-records"]],decls:2,vars:0,template:function(e,s){1&e&&(t.TgZ(0,"p"),t._uU(1,"complaint-view-records works!"),t.qZA())},encapsulation:2}),n})(),x=(()=>{class n{constructor(e){this.gql=e}resolve(e,s){return this.gql.fetch({id:e.params.id})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(m.sp4))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();const j=[{path:"",component:J,resolve:{complaint:x},runGuardsAndResolvers:"paramsOrQueryParamsChange",children:[{path:"",redirectTo:"info"},{path:"info",component:Y},{path:"records",component:F}]}];let _=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[x],imports:[[l.Bz.forChild(j)],l.Bz]}),n})();var B=o(6889);let D=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[a.ez,_,B.m]]}),n})()}}]);