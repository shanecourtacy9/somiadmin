"use strict";(self.webpackChunksomiadmin=self.webpackChunksomiadmin||[]).push([[911],{5911:(O,p,o)=>{o.r(p),o.d(p,{LoginModule:()=>w});var f=o(9808),h=o(655),s=o(3075),v=o(4362),x=o(3905),a=o(1777);const z=(0,a.X$)("loginTransition",[(0,a.eR)(":enter",[(0,a.IO)("div.wrapper",[(0,a.oB)({opacity:0,transform:"translate3d(0, 10px, 0)"}),(0,a.jt)("400ms 200ms")])]),(0,a.eR)(":leave",[(0,a.jt)("200ms",(0,a.oB)({opacity:0}))])]);var t=o(5e3),c=o(9826),C=o(9727),m=o(4546),u=o(1894),d=o(1047),y=o(2683),L=o(647),T=o(6042),F=o(2643);function M(i,l){if(1&i){const n=t.EpF();t.TgZ(0,"i",13),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return r.passwordVisible=!r.passwordVisible}),t.qZA()}if(2&i){const n=t.oxw();t.Q6J("nzType",n.passwordVisible?"eye-invisible":"eye")}}let Z=(()=>{class i{constructor(n,e,r,g){this.fb=n,this.router=e,this.message=r,this.loginGql=g,this.state="activated",this.validateForm=this.fb.group({userName:[null,[s.kI.required]],password:[null,[]],remember:[!0]}),this.validating=!1,this.passwordVisible=!1}submitForm(){for(const n in this.validateForm.controls)this.validateForm.controls[n].markAsDirty(),this.validateForm.controls[n].updateValueAndValidity()}onLogin(){var n,e;return(0,h.mG)(this,void 0,void 0,function*(){try{const r=null===(n=this.validateForm.get("userName"))||void 0===n?void 0:n.value,g=null===(e=this.validateForm.get("password"))||void 0===e?void 0:e.value,P=yield(0,x.z)(this.loginGql.fetch({username:r,password:g}));localStorage.setItem("somi_admin_token",P.data.login.token),this.router.navigate([""],{})}catch(r){this.message.error(r.message),this.validateForm.controls.password.setErrors({incorrect:!0})}})}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(s.qu),t.Y36(c.F0),t.Y36(C.dD),t.Y36(v.mei))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-login"]],hostVars:1,hostBindings:function(n,e){2&n&&t.d8E("@loginTransition",e.state)},decls:21,vars:4,consts:[[1,"full-screen","page-content"],[1,"wrapper"],["src","./assets/logo.png","alt","",1,"logo-img"],[1,"text-wrapper"],[1,"title-text"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzErrorTip","Please input your username!"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","userName","placeholder","Username"],["nzPrefixIcon","lock",3,"nzSuffix"],["nz-input","","formControlName","password","placeholder","Password",3,"type"],["passwordSuffixTemplate",""],["nz-button","","nzType","default",1,"login-form-button",3,"disabled","click"],["nz-icon","",3,"nzType","click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"img",2),t.TgZ(3,"div",3)(4,"h1",4),t._uU(5,"Login"),t.qZA()(),t.TgZ(6,"form",5),t.NdJ("ngSubmit",function(){return e.submitForm()}),t.TgZ(7,"nz-form-item")(8,"nz-form-control",6)(9,"nz-input-group",7),t._UZ(10,"input",8),t.qZA()()(),t.TgZ(11,"nz-form-item")(12,"nz-form-control")(13,"nz-input-group",9),t._UZ(14,"input",10),t.qZA(),t.YNc(15,M,1,1,"ng-template",null,11,t.W1O),t.qZA()(),t.TgZ(17,"nz-form-item")(18,"nz-form-control")(19,"button",12),t.NdJ("click",function(){return e.onLogin()}),t._uU(20," Log in "),t.qZA()()()()()()),2&n){const r=t.MAs(16);t.xp6(6),t.Q6J("formGroup",e.validateForm),t.xp6(7),t.Q6J("nzSuffix",r),t.xp6(1),t.Q6J("type",e.passwordVisible?"text":"password"),t.xp6(5),t.Q6J("disabled",!e.validateForm.valid)}},directives:[s._Y,s.JL,m.Lr,s.sg,u.SK,m.Nx,u.t3,m.Fd,d.gB,y.w,d.Zp,s.Fj,s.JJ,s.u,d.ke,L.Ls,T.ix,F.dQ],styles:[".login-form-button[_ngcontent-%COMP%]{margin-top:12px}.page-content[_ngcontent-%COMP%]{background-color:#e08664!important}.full-screen[_ngcontent-%COMP%]{position:fixed;top:0;left:0;right:0;bottom:0}.full[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-height:400px;max-height:420px;height:60vh;min-width:300px;width:30vw;max-width:400px;padding:40px 30px 10px;border-radius:8px;background-color:#fff}.logo-img[_ngcontent-%COMP%]{flex:0 0 100px;width:100px;height:100px}form[_ngcontent-%COMP%]{width:100%}.text-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;text-align:center}.title-text[_ngcontent-%COMP%]{font-size:24px;color:#a5a5a5}button[_ngcontent-%COMP%]{width:100%}div.page-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding-top:50px}"],data:{animation:[z]}}),i})();var b=o(6889);let w=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.ez,b.m,c.Bz.forChild([{path:"",component:Z}])]]}),i})()}}]);